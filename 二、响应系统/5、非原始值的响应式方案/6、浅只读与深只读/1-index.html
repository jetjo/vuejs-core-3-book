<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>测试reactive api</title>
  </head>
  <body>
    <script type="module">
      import {
        reactive,
        shallowReactive,
        readonly,
        shallowReadonly
      } from './index.js'
      import { watch } from '../../index.js'
      import { RAW, FLUSH_TYPE } from '../../convention.js'
      const state = reactive({
        name: 'liuyifei',
        body: reactive(reactive({ weight: 60 }))
      })
      //   const state = shallowReactive({ name: 'liuyifei', body: { weight: 60 } })
      //   const state = readonly({ name: 'liuyifei', body: { weight: 60 } })
      // const state = shallowReadonly({ name: 'liuyifei', body: { weight: 60 } })
      // console.log(state, typeof state)
      // const state1 = reactive(state)
      // console.log(state1)
      const state1 = shallowReadonly(state)
      watch(
        state,
        () => {
          console.log('状态更新: ', state[RAW])
        },
        {
          flush: FLUSH_TYPE.sync
        }
      )
      // state1.name = ''
      // state1.body.age = 18
      // state1.body.age = 19
      delete state.body.weight
    </script>
  </body>
</html>
